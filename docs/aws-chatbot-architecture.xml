<mxfile host="app.diagrams.net">
  <diagram name="AWS Infrastructure" id="aws-infra">
    <mxGraphModel dx="2000" dy="1100" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1200">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Background -->
        <mxCell id="bg" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry width="1920" height="1200" as="geometry"/>
        </mxCell>
        
        <!-- Title -->
        <mxCell id="title" value="El Sabor - Infraestrutura AWS Completa" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=28;fontStyle=1;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="560" y="20" width="800" height="50" as="geometry"/>
        </mxCell>
        
        <!-- Users Icon -->
        <mxCell id="users" value="UsuÃ¡rios" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#232F3D;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=14;fontStyle=1;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.users;" vertex="1" parent="1">
          <mxGeometry x="100" y="350" width="100" height="100" as="geometry"/>
        </mxCell>
        
        <!-- Internet Cloud -->
        <mxCell id="internet" value="Internet" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="280" y="330" width="180" height="120" as="geometry"/>
        </mxCell>
        
        <!-- AWS Cloud -->
        <mxCell id="aws-cloud" value="AWS Cloud - Region: us-east-1" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=14;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_aws_cloud;strokeColor=#FF9900;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#FF9900;dashed=0;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="540" y="100" width="1300" height="1020" as="geometry"/>
        </mxCell>
        
        <!-- VPC -->
        <mxCell id="vpc" value="VPC - 10.0.0.0/16" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=14;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_vpc;strokeColor=#248814;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#248814;dashed=0;strokeWidth=3;" vertex="1" parent="aws-cloud">
          <mxGeometry x="40" y="60" width="1220" height="920" as="geometry"/>
        </mxCell>
        
        <!-- Internet Gateway -->
        <mxCell id="igw" value="Internet Gateway" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#4D27AA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.internet_gateway;" vertex="1" parent="vpc">
          <mxGeometry x="570" y="10" width="80" height="80" as="geometry"/>
        </mxCell>
        
        <!-- Availability Zone 1 -->
        <mxCell id="az1" value="Availability Zone: us-east-1a" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_availability_zone;strokeColor=#545B64;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#545B64;dashed=1;strokeWidth=2;" vertex="1" parent="vpc">
          <mxGeometry x="40" y="120" width="540" height="760" as="geometry"/>
        </mxCell>
        
        <!-- Public Subnet AZ1 -->
        <mxCell id="public-subnet-1" value="Public Subnet 1&#xa;10.0.0.0/24" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#248814;fillColor=#E9F3E6;verticalAlign=top;align=left;spacingLeft=30;fontColor=#248814;dashed=0;strokeWidth=2;" vertex="1" parent="az1">
          <mxGeometry x="20" y="20" width="500" height="200" as="geometry"/>
        </mxCell>
        
        <!-- NAT Gateway 1 -->
        <mxCell id="nat1" value="NAT Gateway 1" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#4D27AA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.nat_gateway;" vertex="1" parent="public-subnet-1">
          <mxGeometry x="210" y="80" width="80" height="80" as="geometry"/>
        </mxCell>
        
        <!-- EIP 1 -->
        <mxCell id="eip1" value="Elastic IP" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#4D27AA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.elastic_ip_address;" vertex="1" parent="public-subnet-1">
          <mxGeometry x="230" y="20" width="40" height="40" as="geometry"/>
        </mxCell>
        
        <!-- Private Subnet AZ1 -->
        <mxCell id="private-subnet-1" value="Private Subnet 1&#xa;10.0.10.0/24" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#147EBA;fillColor=#E6F2F8;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;strokeWidth=2;" vertex="1" parent="az1">
          <mxGeometry x="20" y="260" width="500" height="460" as="geometry"/>
        </mxCell>
        
        <!-- ECS Backend Task 1 -->
        <mxCell id="ecs-backend-1" value="ECS Backend Task&#xa;FastAPI&#xa;Port: 8000&#xa;CPU: 512&#xa;Memory: 1024MB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D45B07;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ecs_task;" vertex="1" parent="private-subnet-1">
          <mxGeometry x="60" y="60" width="60" height="78" as="geometry"/>
        </mxCell>
        
        <!-- ECS Frontend Task 1 -->
        <mxCell id="ecs-frontend-1" value="ECS Frontend Task&#xa;Next.js&#xa;Port: 3000&#xa;CPU: 256&#xa;Memory: 512MB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D45B07;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ecs_task;" vertex="1" parent="private-subnet-1">
          <mxGeometry x="360" y="60" width="60" height="78" as="geometry"/>
        </mxCell>
        
        <!-- Security Group ECS -->
        <mxCell id="sg-ecs-1" value="Security Group&#xa;ECS Tasks&#xa;Ingress: :8000, :3000&#xa;Egress: All" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.security_group;" vertex="1" parent="private-subnet-1">
          <mxGeometry x="210" y="200" width="40" height="48" as="geometry"/>
        </mxCell>
        
        <!-- CloudWatch Logs -->
        <mxCell id="cw-logs-1" value="CloudWatch&#xa;Logs" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#B0084D;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.cloudwatch;" vertex="1" parent="private-subnet-1">
          <mxGeometry x="60" y="360" width="50" height="50" as="geometry"/>
        </mxCell>
        
        <!-- Auto Scaling -->
        <mxCell id="autoscaling-1" value="Auto Scaling&#xa;Min: 2, Max: 4" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D45B07;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.auto_scaling2;" vertex="1" parent="private-subnet-1">
          <mxGeometry x="360" y="360" width="50" height="50" as="geometry"/>
        </mxCell>
        
        <!-- Availability Zone 2 -->
        <mxCell id="az2" value="Availability Zone: us-east-1b" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_availability_zone;strokeColor=#545B64;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#545B64;dashed=1;strokeWidth=2;" vertex="1" parent="vpc">
          <mxGeometry x="640" y="120" width="540" height="760" as="geometry"/>
        </mxCell>
        
        <!-- Public Subnet AZ2 -->
        <mxCell id="public-subnet-2" value="Public Subnet 2&#xa;10.0.1.0/24" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#248814;fillColor=#E9F3E6;verticalAlign=top;align=left;spacingLeft=30;fontColor=#248814;dashed=0;strokeWidth=2;" vertex="1" parent="az2">
          <mxGeometry x="20" y="20" width="500" height="200" as="geometry"/>
        </mxCell>
        
        <!-- ALB in Public Subnet -->
        <mxCell id="alb" value="Application&#xa;Load Balancer&#xa;:80, :443" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D45B07;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.application_load_balancer;" vertex="1" parent="public-subnet-2">
          <mxGeometry x="60" y="80" width="80" height="80" as="geometry"/>
        </mxCell>
        
        <!-- NAT Gateway 2 -->
        <mxCell id="nat2" value="NAT Gateway 2" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#4D27AA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.nat_gateway;" vertex="1" parent="public-subnet-2">
          <mxGeometry x="360" y="80" width="80" height="80" as="geometry"/>
        </mxCell>
        
        <!-- EIP 2 -->
        <mxCell id="eip2" value="Elastic IP" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#4D27AA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.elastic_ip_address;" vertex="1" parent="public-subnet-2">
          <mxGeometry x="380" y="20" width="40" height="40" as="geometry"/>
        </mxCell>
        
        <!-- Private Subnet AZ2 -->
        <mxCell id="private-subnet-2" value="Private Subnet 2&#xa;10.0.11.0/24" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#147EBA;fillColor=#E6F2F8;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;strokeWidth=2;" vertex="1" parent="az2">
          <mxGeometry x="20" y="260" width="500" height="460" as="geometry"/>
        </mxCell>
        
        <!-- ECS Backend Task 2 -->
        <mxCell id="ecs-backend-2" value="ECS Backend Task&#xa;FastAPI&#xa;Port: 8000&#xa;CPU: 512&#xa;Memory: 1024MB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D45B07;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ecs_task;" vertex="1" parent="private-subnet-2">
          <mxGeometry x="60" y="60" width="60" height="78" as="geometry"/>
        </mxCell>
        
        <!-- ECS Frontend Task 2 -->
        <mxCell id="ecs-frontend-2" value="ECS Frontend Task&#xa;Next.js&#xa;Port: 3000&#xa;CPU: 256&#xa;Memory: 512MB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D45B07;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ecs_task;" vertex="1" parent="private-subnet-2">
          <mxGeometry x="360" y="60" width="60" height="78" as="geometry"/>
        </mxCell>
        
        <!-- Security Group ECS 2 -->
        <mxCell id="sg-ecs-2" value="Security Group&#xa;ECS Tasks&#xa;Ingress: :8000, :3000&#xa;Egress: All" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.security_group;" vertex="1" parent="private-subnet-2">
          <mxGeometry x="210" y="200" width="40" height="48" as="geometry"/>
        </mxCell>
        
        <!-- CloudWatch Logs 2 -->
        <mxCell id="cw-logs-2" value="CloudWatch&#xa;Logs" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#B0084D;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.cloudwatch;" vertex="1" parent="private-subnet-2">
          <mxGeometry x="60" y="360" width="50" height="50" as="geometry"/>
        </mxCell>
        
        <!-- Auto Scaling 2 -->
        <mxCell id="autoscaling-2" value="Auto Scaling&#xa;Min: 2, Max: 4" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D45B07;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.auto_scaling2;" vertex="1" parent="private-subnet-2">
          <mxGeometry x="360" y="360" width="50" height="50" as="geometry"/>
        </mxCell>
        
        <!-- RDS and Redis Area -->
        <mxCell id="data-layer" value="Data Layer (Multi-AZ)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;verticalAlign=top;fontSize=12;fontStyle=1;dashed=1;strokeWidth=2;" vertex="1" parent="vpc">
          <mxGeometry x="200" y="730" width="820" height="150" as="geometry"/>
        </mxCell>
        
        <!-- RDS PostgreSQL -->
        <mxCell id="rds" value="RDS PostgreSQL 15.4&#xa;Instance: db.t3.micro&#xa;Storage: 20GB (GP3)&#xa;Multi-AZ: No&#xa;Backup: 7 days" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#2E27AD;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.rds_postgresql_instance;" vertex="1" parent="vpc">
          <mxGeometry x="300" y="780" width="78" height="78" as="geometry"/>
        </mxCell>
        
        <!-- Security Group RDS -->
        <mxCell id="sg-rds" value="SG: RDS&#xa;:5432" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.security_group;" vertex="1" parent="vpc">
          <mxGeometry x="260" y="800" width="30" height="36" as="geometry"/>
        </mxCell>
        
        <!-- ElastiCache Redis -->
        <mxCell id="redis" value="ElastiCache Redis 7.0&#xa;Node: cache.t3.micro&#xa;Nodes: 1&#xa;Snapshot: Daily" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#C7131F;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.elasticache_for_redis;" vertex="1" parent="vpc">
          <mxGeometry x="520" y="780" width="78" height="78" as="geometry"/>
        </mxCell>
        
        <!-- Security Group Redis -->
        <mxCell id="sg-redis" value="SG: Redis&#xa;:6379" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.security_group;" vertex="1" parent="vpc">
          <mxGeometry x="480" y="800" width="30" height="36" as="geometry"/>
        </mxCell>
        
        <!-- DB Subnet Group -->
        <mxCell id="db-subnet-group" value="DB Subnet Group&#xa;(Private Subnets)" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#2E27AD;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.subnet;" vertex="1" parent="vpc">
          <mxGeometry x="720" y="800" width="50" height="50" as="geometry"/>
        </mxCell>
        
        <!-- Cache Subnet Group -->
        <mxCell id="cache-subnet-group" value="Cache Subnet Group&#xa;(Private Subnets)" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#C7131F;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.subnet;" vertex="1" parent="vpc">
          <mxGeometry x="860" y="800" width="50" height="50" as="geometry"/>
        </mxCell>
        
        <!-- ECR Repository -->
        <mxCell id="ecr" value="Amazon ECR&#xa;Repositories:&#xa;- backend&#xa;- frontend" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D45B07;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ecr;" vertex="1" parent="aws-cloud">
          <mxGeometry x="1100" y="250" width="78" height="78" as="geometry"/>
        </mxCell>
        
        <!-- CloudWatch Main -->
        <mxCell id="cloudwatch-main" value="CloudWatch&#xa;Monitoring&#xa;&amp; Alarms" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#B0084D;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.cloudwatch;" vertex="1" parent="aws-cloud">
          <mxGeometry x="1100" y="450" width="78" height="78" as="geometry"/>
        </mxCell>
        
        <!-- Route Tables -->
        <mxCell id="route-public" value="Public Route Table&#xa;0.0.0.0/0 â†’ IGW" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#4D27AA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.route_table;" vertex="1" parent="aws-cloud">
          <mxGeometry x="1100" y="650" width="50" height="48" as="geometry"/>
        </mxCell>
        
        <mxCell id="route-private-1" value="Private RT 1&#xa;0.0.0.0/0 â†’ NAT1" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#147EBA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.route_table;" vertex="1" parent="aws-cloud">
          <mxGeometry x="1100" y="750" width="50" height="48" as="geometry"/>
        </mxCell>
        
        <mxCell id="route-private-2" value="Private RT 2&#xa;0.0.0.0/0 â†’ NAT2" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#147EBA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.route_table;" vertex="1" parent="aws-cloud">
          <mxGeometry x="1100" y="850" width="50" height="48" as="geometry"/>
        </mxCell>
        
        <!-- Connections -->
        
        <!-- Users to Internet -->
        <mxCell id="conn1" value="" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#FF9900;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="users" target="internet">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="conn1-label" value="HTTPS" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontStyle=1;fontColor=#FF9900;" vertex="1" connectable="0" parent="conn1">
          <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Internet to IGW -->
        <mxCell id="conn2" value="" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#FF9900;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="internet" target="igw">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- IGW to ALB -->
        <mxCell id="conn3" value="" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#4D27AA;" edge="1" parent="1" source="igw" target="alb">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- ALB to ECS Tasks -->
        <mxCell id="conn4" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#D45B07;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="alb" target="ecs-frontend-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="conn4-label" value="/:3000" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#D45B07;" vertex="1" connectable="0" parent="conn4">
          <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="conn5" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#D45B07;" edge="1" parent="1" source="alb" target="ecs-backend-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="conn5-label" value="/api/*:8000" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#D45B07;" vertex="1" connectable="0" parent="conn5">
          <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="conn6" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#D45B07;" edge="1" parent="1" source="alb" target="ecs-frontend-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="conn7" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#D45B07;" edge="1" parent="1" source="alb" target="ecs-backend-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Backend to RDS -->
        <mxCell id="conn8" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#2E27AD;dashed=1;" edge="1" parent="1" source="ecs-backend-1" target="rds">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="conn8-label" value="PostgreSQL:5432" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#2E27AD;" vertex="1" connectable="0" parent="conn8">
          <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="conn9" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#2E27AD;dashed=1;" edge="1" parent="1" source="ecs-backend-2" target="rds">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Backend to Redis -->
        <mxCell id="conn10" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#C7131F;dashed=1;" edge="1" parent="1" source="ecs-backend-1" target="redis">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="conn10-label" value="Redis:6379" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#C7131F;" vertex="1" connectable="0" parent="conn10">
          <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="conn11" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#C7131F;dashed=1;" edge="1" parent="1" source="ecs-backend-2" target="redis">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- ECS to ECR (image pull) -->
        <mxCell id="conn12" value="" style="endArrow=classic;html=1;strokeWidth=1;strokeColor=#545B64;dashed=1;dashPattern=1 4;" edge="1" parent="1" source="ecs-backend-1" target="ecr">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="conn12-label" value="Pull Image" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#545B64;" vertex="1" connectable="0" parent="conn12">
          <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="conn13" value="" style="endArrow=classic;html=1;strokeWidth=1;strokeColor=#545B64;dashed=1;dashPattern=1 4;" edge="1" parent="1" source="ecs-frontend-1" target="ecr">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- ECS to CloudWatch (logs) -->
        <mxCell id="conn14" value="" style="endArrow=classic;html=1;strokeWidth=1;strokeColor=#B0084D;dashed=1;dashPattern=1 4;" edge="1" parent="1" source="ecs-backend-1" target="cloudwatch-main">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="conn14-label" value="Logs" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#B0084D;" vertex="1" connectable="0" parent="conn14">
          <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="conn15" value="" style="endArrow=classic;html=1;strokeWidth=1;strokeColor=#B0084D;dashed=1;dashPattern=1 4;" edge="1" parent="1" source="ecs-frontend-2" target="cloudwatch-main">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- NAT Gateways to Internet -->
        <mxCell id="conn16" value="" style="endArrow=classic;html=1;strokeWidth=1;strokeColor=#4D27AA;dashed=1;" edge="1" parent="1" source="nat1" target="igw">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="conn17" value="" style="endArrow=classic;html=1;strokeWidth=1;strokeColor=#4D27AA;dashed=1;" edge="1" parent="1" source="nat2" target="igw">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="600" as="sourcePoint"/>
            <mxPoint x="850" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Legend Box -->
        <mxCell id="legend-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="80" y="800" width="400" height="300" as="geometry"/>
        </mxCell>
        
        <mxCell id="legend-title" value="ðŸ“‹ Legenda" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="180" y="810" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <!-- Legend Items -->
        <mxCell id="leg-line1" value="" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#FF9900;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="100" y="860" as="sourcePoint"/>
            <mxPoint x="160" y="860" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="leg-text1" value="TrÃ¡fego HTTP/HTTPS PÃºblico" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="170" y="850" width="200" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="leg-line2" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#D45B07;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="100" y="890" as="sourcePoint"/>
            <mxPoint x="160" y="890" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="leg-text2" value="TrÃ¡fego ECS (Load Balancer)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="170" y="880" width="200" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="leg-line3" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#2E27AD;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="100" y="920" as="sourcePoint"/>
            <mxPoint x="160" y="920" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="leg-text3" value="ConexÃ£o com PostgreSQL" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="170" y="910" width="200" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="leg-line4" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#C7131F;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="100" y="950" as="sourcePoint"/>
            <mxPoint x="160" y="950" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="leg-text4" value="ConexÃ£o com Redis (Cache)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="170" y="940" width="200" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="leg-line5" value="" style="endArrow=classic;html=1;strokeWidth=1;strokeColor=#545B64;dashed=1;dashPattern=1 4;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="100" y="980" as="sourcePoint"/>
            <mxPoint x="160" y="980" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="leg-text5" value="Pull de Imagens Docker (ECR)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="170" y="970" width="200" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="leg-line6" value="" style="endArrow=classic;html=1;strokeWidth=1;strokeColor=#B0084D;dashed=1;dashPattern=1 4;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="100" y="1010" as="sourcePoint"/>
            <mxPoint x="160" y="1010" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="leg-text6" value="Logs e MÃ©tricas (CloudWatch)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="170" y="1000" width="200" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="leg-line7" value="" style="endArrow=classic;html=1;strokeWidth=1;strokeColor=#4D27AA;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="100" y="1040" as="sourcePoint"/>
            <mxPoint x="160" y="1040" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="leg-text7" value="SaÃ­da Internet (NAT Gateway)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="170" y="1030" width="200" height="20" as="geometry"/>
        </mxCell>
        
        <!-- Info Box -->
        <mxCell id="info-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1580" y="800" width="260" height="300" as="geometry"/>
        </mxCell>
        
        <mxCell id="info-title" value="â„¹ï¸ InformaÃ§Ãµes" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="1600" y="810" width="220" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="info-text" value="&lt;b&gt;RegiÃ£o:&lt;/b&gt; us-east-1&lt;br&gt;&lt;br&gt;&lt;b&gt;VPC CIDR:&lt;/b&gt; 10.0.0.0/16&lt;br&gt;&lt;br&gt;&lt;b&gt;AZs:&lt;/b&gt; 2 (us-east-1a, us-east-1b)&lt;br&gt;&lt;br&gt;&lt;b&gt;Public Subnets:&lt;/b&gt;&lt;br&gt;â€¢ 10.0.0.0/24&lt;br&gt;â€¢ 10.0.1.0/24&lt;br&gt;&lt;br&gt;&lt;b&gt;Private Subnets:&lt;/b&gt;&lt;br&gt;â€¢ 10.0.10.0/24&lt;br&gt;â€¢ 10.0.11.0/24&lt;br&gt;&lt;br&gt;&lt;b&gt;Total Tasks:&lt;/b&gt; 4&lt;br&gt;(2 Backend + 2 Frontend)&lt;br&gt;&lt;br&gt;&lt;b&gt;Auto Scaling:&lt;/b&gt;&lt;br&gt;Min: 2, Max: 4 por serviÃ§o" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="1600" y="850" width="220" height="230" as="geometry"/>
        </mxCell>
        
        <!-- Cost Estimate Box -->
        <mxCell id="cost-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1580" y="480" width="260" height="280" as="geometry"/>
        </mxCell>
        
        <mxCell id="cost-title" value="ðŸ’° Custos Estimados (Mensal)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="1590" y="490" width="240" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="cost-text" value="&lt;b&gt;NAT Gateways (2):&lt;/b&gt; $32&lt;br&gt;&lt;b&gt;ALB:&lt;/b&gt; $22&lt;br&gt;&lt;b&gt;ECS Fargate:&lt;/b&gt; $40&lt;br&gt;&lt;b&gt;RDS t3.micro:&lt;/b&gt; $15&lt;br&gt;&lt;b&gt;ElastiCache t3.micro:&lt;/b&gt; $12&lt;br&gt;&lt;b&gt;ECR:&lt;/b&gt; $1&lt;br&gt;&lt;b&gt;CloudWatch:&lt;/b&gt; $5&lt;br&gt;&lt;b&gt;Data Transfer:&lt;/b&gt; $5-10&lt;br&gt;&lt;br&gt;&lt;font color=&quot;#d45b07&quot;&gt;&lt;b&gt;TOTAL: ~$130-140/mÃªs&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;br&gt;&lt;font size=&quot;2&quot;&gt;ðŸ’¡ &lt;i&gt;Para reduzir custos:&lt;/i&gt;&lt;br&gt;â€¢ Use 1 NAT (-$16)&lt;br&gt;â€¢ desired_count=1 (-$20)&lt;br&gt;â€¢ Destrua quando nÃ£o usar&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="1600" y="530" width="220" height="210" as="geometry"/>
        </mxCell>
        
        <!-- Security Box -->
        <mxCell id="security-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1580" y="180" width="260" height="260" as="geometry"/>
        </mxCell>
        
        <mxCell id="security-title" value="ðŸ”’ SeguranÃ§a" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="1600" y="190" width="220" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="security-text" value="âœ… VPC isolada&lt;br&gt;âœ… Subnets privadas para apps&lt;br&gt;âœ… Security Groups restritos&lt;br&gt;âœ… Encryption at rest (RDS)&lt;br&gt;âœ… HTTPS no ALB&lt;br&gt;âœ… IAM Roles mÃ­nimas&lt;br&gt;âœ… VPC Flow Logs&lt;br&gt;âœ… Scan de vulnerabilidades&lt;br&gt;&lt;br&gt;&lt;b&gt;Security Groups:&lt;/b&gt;&lt;br&gt;â€¢ ALB: 80, 443 â†’ All&lt;br&gt;â€¢ ECS: 8000, 3000 â†’ ALB&lt;br&gt;â€¢ RDS: 5432 â†’ ECS&lt;br&gt;â€¢ Redis: 6379 â†’ ECS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#232F3E;" vertex="1" parent="1">
          <mxGeometry x="1600" y="230" width="220" height="190" as="geometry"/>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>